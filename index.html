<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Zootopia ‚Äî Nuestra Historia üíû</title>
<style>
:root {
  --bg:#0c0619;
  --accent:#ff6b8a;
  --accent2:#a96bff;
  --gold:#ffd6a5;
  --text:#fff;
}

/* ===== BASE ===== */
*{box-sizing:border-box;margin:0;padding:0}
html,body{
  height:100%;
  width:100%;
  background:var(--bg);
  color:var(--text);
  font-family:"Poppins",sans-serif;
  overflow:hidden;
  display:flex;
  align-items:center;
  justify-content:center;
}

/* ===== FONDOS ===== */
.bg{
  position:fixed;
  inset:0;
  background-size:cover;
  background-position:center;
  filter:brightness(1.05) contrast(1.1) saturate(1.1);
  opacity:0;
  transition:opacity 1.2s ease;
  z-index:0;
}
.bg.show{opacity:1;animation:slowZoom 40s ease-in-out infinite alternate;}
@keyframes slowZoom{
  0%{transform:scale(1);}
  100%{transform:scale(1.08);}
}
.overlay{
  position:fixed;
  inset:0;
  background:radial-gradient(circle at center, rgba(0,0,0,0.3) 0%, rgba(0,0,0,0.7) 100%);
  z-index:1;
}

/* ===== ESCENAS ===== */
.stage{
  position:relative;
  z-index:10;
  width:100%;
  max-width:900px;
  padding:20px;
  text-align:center;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
}

/* ===== SOBRE ANIMADO ===== */
.envelope {
  position:fixed; /* ‚úÖ siempre visible */
  left:50%;
  top:100%; /* empieza fuera de pantalla */
  transform:translateX(-50%);
  width:250px;
  height:170px;
  background:linear-gradient(145deg,#b57aff,#ff82b5);
  border-radius:14px;
  box-shadow:0 0 35px rgba(255,107,255,0.35), inset 0 0 15px rgba(255,255,255,0.15);
  overflow:hidden;
  cursor:pointer;
  opacity:0;
  animation:envelopeIntro 3s ease forwards;
  z-index:20;
}

/* üí´ Sube y se detiene en la parte superior visible */
@keyframes envelopeIntro {
  0% {opacity:0; top:100%; transform:translateX(-50%) scale(0.9);}
  60% {opacity:1; top:40%; transform:translateX(-50%) scale(1.05);}
  100% {opacity:1; top:10vh; transform:translateX(-50%) scale(1);}
}

.envelope::before{
  content:"";
  position:absolute;
  inset:0;
  clip-path:polygon(0 0,100% 0,50% 60%);
  background:linear-gradient(135deg,#ffd6a5,#ff9ec4);
}
.envelope::after{
  content:"üíå";
  position:absolute;
  top:58%;
  left:50%;
  transform:translate(-50%,-50%);
  font-size:42px;
  animation:beat 1.2s infinite alternate;
  filter:drop-shadow(0 0 10px #ffd6a5);
}
@keyframes beat{
  from{transform:translate(-50%,-50%) scale(0.9);}
  to{transform:translate(-50%,-50%) scale(1.2);}
}

/* ‚ú® AURA M√ÅGICA GIRATORIA */
.magic-glow {
  position:absolute;
  top:50%;
  left:50%;
  width:320px;
  height:320px;
  transform:translate(-50%,-50%);
  border-radius:50%;
  background:conic-gradient(from 0deg, rgba(255,214,165,0.25), rgba(255,107,138,0.4), rgba(169,107,255,0.3), rgba(255,214,165,0.25));
  filter:blur(28px);
  animation:rotateGlow 6s linear infinite;
  z-index:-1;
}
@keyframes rotateGlow{
  from{transform:translate(-50%,-50%) rotate(0deg);}
  to{transform:translate(-50%,-50%) rotate(360deg);}
}

/* Apertura del sobre */
.envelope.open {
  animation:openEnvelope 1.5s forwards ease-in-out;
}
@keyframes openEnvelope {
  0% {top:10vh; transform:translateX(-50%) rotateX(0deg);}
  50% {top:8vh; transform:translateX(-50%) rotateX(40deg);}
  100% {top:-10vh; transform:translateX(-50%) scale(0.85);}
}

/* ===== CARTA ===== */
.card {
  background:linear-gradient(145deg, rgba(255,255,255,0.15), rgba(171,140,255,0.1));
  border:1.5px solid rgba(255,182,255,0.5);
  border-radius:24px;
  backdrop-filter:blur(14px);
  box-shadow:0 0 25px rgba(255,107,255,0.3);
  padding:35px 25px;
  max-width:460px;
  opacity:0;
  margin:auto;
  transition:opacity 1s ease, transform 1s ease;
  transform:scale(0.9);
  position:relative;
}
.card.show {
  opacity:1;
  transform:scale(1);
  animation:cardGlow 4s ease-in-out infinite alternate;
}
@keyframes cardGlow{
  0%{box-shadow:0 0 25px rgba(255,107,255,0.3);}
  100%{box-shadow:0 0 35px rgba(255,182,255,0.5);}
}
.card h1{
  font-size:24px;
  color:#ffd6ff;
  text-shadow:0 0 10px rgba(255,182,255,0.5);
  margin-bottom:12px;
}
.card p{
  font-size:16px;
  line-height:1.6;
  white-space:pre-line;
  opacity:0.95;
  margin:0 auto;
  max-width:380px;
}

/* ===== PERSONAJES ===== */
.characters{
  display:flex;
  justify-content:center;
  align-items:flex-end;
  gap:10px;
  margin-top:20px;
  flex-wrap:wrap;
  position:relative;
}
.character{
  height:230px;
  width:auto;
  opacity:0;
  object-fit:contain;
  transition:all 1.5s ease;
  animation:floaty 6s ease-in-out infinite;
  filter:drop-shadow(0 10px 22px rgba(0,0,0,0.5)) brightness(1.05);
}
#nick{transform:translateX(-150%) translateY(0);}
#judy{transform:translateX(150%);}
.character.show{opacity:1;transform:translateX(0) translateY(0);}
@keyframes floaty{0%,100%{transform:translateY(0);}50%{transform:translateY(-6px);}}

/* ===== BOT√ìN ===== */
.btn{
  display:inline-block;
  background:linear-gradient(90deg,#a96bff,#ff6b8a);
  color:#fff;
  padding:10px 24px;
  border-radius:999px;
  margin-top:25px;
  text-decoration:none;
  font-weight:600;
  box-shadow:0 6px 20px rgba(255,107,255,0.3);
  transition:transform .25s;
}
.btn:hover{transform:scale(1.05);}

/* ===== CONFETTI ===== */
.confetti {
  position:fixed;top:0;left:0;width:100%;height:100%;
  overflow:hidden;pointer-events:none;z-index:5;
}
.emoji {
  position:absolute;font-size:22px;animation:fall linear forwards;user-select:none;
}
@keyframes fall {
  0% { transform:translateY(-10vh) rotate(0deg); opacity:1; }
  100% { transform:translateY(110vh) rotate(720deg); opacity:0; }
}

/* ===== RESPONSIVE ===== */
@media (max-width:600px) {
  .card { max-width:90%; padding:25px 18px; }
  h1 { font-size:20px; }
  p { font-size:14.5px; }
  .character { height:180px; }
}
</style>
</head>
<body>

<!-- ===== FONDOS ===== -->
<div class="bg show" id="bg1" style="background-image:url('fondo1.jpg')"></div>
<div class="bg" id="bg2" style="background-image:url('fondo2.jpg')"></div>
<div class="bg" id="bg3" style="background-image:url('fondo3.jpg')"></div>
<div class="overlay"></div>

<div class="confetti" id="confetti"></div>

<div class="stage">
  <!-- ESCENA 1 -->
  <div id="scene1">
    <div class="envelope" id="envelope" onclick="openEnvelope()">
      <div class="magic-glow"></div>
    </div>
  </div>

  <!-- ESCENA 2 -->
  <div id="scene2" style="display:none;">
    <div class="card" id="card1">
      <h1>En la ciudad de Zootopia üåÜ</h1>
      <p>Dos almas se cruzaron y sin saberlo  
empezaron su aventura.  
Nick y Judy, tan distintos pero tan iguales,  
como t√∫ y yo üíû</p>
      <div class="characters">
        <img src="nick.png" id="nick" class="character" alt="Nick Wilde">
        <img src="judy.png" id="judy" class="character" alt="Judy Hopps">
      </div>
      <a href="#" class="btn" onclick="nextScene()">Continuar ‚ûú</a>
    </div>
  </div>

  <!-- ESCENA 3 -->
  <div id="scene3" style="display:none;">
    <div class="card show">
      <h1>Gracias por ser mi Zootopia üí´</h1>
      <p>Contigo todo tiene sentido,  
mi mundo brilla un poco m√°s.  
Eres mi calma, mi locura y mi hogar.  
Te amo con todo mi coraz√≥n üíñ</p>
      <a href="#" class="btn" onclick="restart()">Volver a empezar</a>
    </div>
  </div>
</div>

<!-- üé∂ M√öSICA -->
<audio id="musica" src="musica.mp3" preload="auto" loop></audio>

<script>
const musica=document.getElementById("musica");
const confettiContainer=document.getElementById("confetti");
let confettiInterval;

function openEnvelope(){
  const envelope=document.getElementById("envelope");
  envelope.classList.add("open");
  musica.play().catch(()=>{
    document.body.addEventListener('touchstart',()=>musica.play(),{once:true});
  });

  setTimeout(()=>{
    envelope.style.display="none";
    document.getElementById("scene2").style.display="flex";
    document.getElementById("bg1").classList.remove("show");
    document.getElementById("bg2").classList.add("show");
    const card=document.getElementById("card1");
    setTimeout(()=>card.classList.add("show"),300);
    setTimeout(()=>{
      document.getElementById("nick").classList.add("show");
      document.getElementById("judy").classList.add("show");
    },800);
    lanzarConfetti();
    confettiInterval=setInterval(lanzarConfetti,4000);
  },1500);
}

function nextScene(){
  document.getElementById("scene2").style.display="none";
  document.getElementById("scene3").style.display="flex";
  document.getElementById("bg2").classList.remove("show");
  document.getElementById("bg3").classList.add("show");
  lanzarConfetti();
}

function restart(){
  clearInterval(confettiInterval);
  document.getElementById("scene3").style.display="none";
  document.getElementById("scene2").style.display="none";
  document.getElementById("scene1").style.display="block";
  document.getElementById("bg3").classList.remove("show");
  document.getElementById("bg1").classList.add("show");

  const envelope=document.getElementById("envelope");
  envelope.style.display="block";
  envelope.classList.remove("open");
  envelope.style.opacity="0";
  envelope.style.animation="none";
  void envelope.offsetWidth;
  envelope.style.animation="envelopeIntro 3s ease forwards";
}

function lanzarConfetti(){
  const emojis=["üå∏","‚ú®","üíû","ü¶ñ","üß∏","üíó","üå∑","‚≠ê"];
  for(let i=0;i<25;i++){
    setTimeout(()=>{
      const e=document.createElement("div");
      e.classList.add("emoji");
      e.innerText=emojis[Math.floor(Math.random()*emojis.length)];
      let x;do{x=Math.random()*100;}while(x>40&&x<60);
      e.style.left=x+"vw";
      e.style.animationDuration=(3+Math.random()*3)+"s";
      e.style.fontSize=(18+Math.random()*24)+"px";
      confettiContainer.appendChild(e);
      setTimeout(()=>e.remove(),6000);
    },i*70);
  }
}
</script>
</body>
</html>
