<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Zootopia ‚Äî Nuestra Aventura üíñ</title>
<style>
:root {
  --text:#fff;
  --accent:#ff6b8a;
  --shadow:rgba(0,0,0,0.5);
}

/* Reset */
*{box-sizing:border-box;margin:0;padding:0}
html,body{
  width:100%;height:100%;overflow:hidden;
  font-family:"Poppins",sans-serif;
  background:#0f1226;color:var(--text);
  display:flex;align-items:center;justify-content:center;
}

/* Fondos */
.bg{
  position:absolute;inset:0;
  background-size:cover;
  background-position:center;
  opacity:0;
  transform:scale(1.05);
  transition:opacity 1.5s ease,transform 1.5s ease;
  z-index:0;
}
.bg.show{opacity:1;transform:scale(1);}

/* Overlay sutil */
.overlay{
  position:absolute;inset:0;
  background:linear-gradient(180deg,rgba(0,0,0,0.2),rgba(0,0,0,0.5));
  z-index:1;
}

/* Confeti y corazones */
.confetti,.hearts{
  position:fixed;top:0;left:0;width:100%;height:100%;
  overflow:hidden;pointer-events:none;
  z-index:5;
}
.emoji{
  position:absolute;
  font-size:22px;
  animation:fall linear forwards;
  user-select:none;
}
@keyframes fall{
  0%{transform:translateY(-10vh) rotate(0deg);opacity:1;}
  100%{transform:translateY(110vh) rotate(720deg);opacity:0;}
}

/* Escenario */
.stage{
  position:relative;
  z-index:10;
  text-align:center;
  max-width:900px;
  width:100%;
  padding:20px;
}

/* Bot√≥n tipo sobre */
.envelope{
  width:260px;height:180px;
  background:linear-gradient(180deg,#ff8fb5,#ff6b8a);
  border-radius:12px;
  box-shadow:0 8px 30px var(--shadow);
  margin:auto;
  cursor:pointer;
  position:relative;
  transition:transform .3s ease;
}
.envelope:hover{transform:scale(1.05);}
.envelope::before{
  content:"";position:absolute;inset:0;
  clip-path:polygon(0 0,100% 0,50% 60%);
  background:linear-gradient(135deg,#ffc1d2,#ff6b8a);
}
.envelope::after{
  content:"üíñ";position:absolute;
  top:60%;left:50%;transform:translate(-50%,-50%);
  font-size:36px;animation:beat 1.4s infinite alternate;
}
@keyframes beat{from{transform:translate(-50%,-50%) scale(0.9);}to{transform:translate(-50%,-50%) scale(1.2);}}

/* Carta/escena */
.card{
  background:rgba(255,255,255,0.15);
  border:1px solid rgba(255,182,193,0.3);
  border-radius:20px;
  padding:30px 20px;
  backdrop-filter:blur(10px);
  box-shadow:0 10px 40px rgba(0,0,0,0.5);
  max-width:480px;
  margin:auto;
  opacity:0;
  transform:scale(0.8);
  transition:opacity 1s ease,transform 1s ease;
}
.card.show{opacity:1;transform:scale(1);}
h1{font-size:26px;margin-bottom:10px;text-shadow:0 2px 6px var(--shadow);}
p{font-size:18px;line-height:1.5;white-space:pre-line;}

/* Personajes */
.characters{
  display:flex;justify-content:center;align-items:flex-end;
  gap:40px;margin-top:20px;
}
.character{
  width:220px;max-width:40%;
  transition:transform 1.5s ease-in-out;
  animation:floaty 6s ease-in-out infinite;
}
@keyframes floaty{
  0%,100%{transform:translateY(0);}
  50%{transform:translateY(-12px);}
}

/* Bot√≥n siguiente */
.btn{
  display:inline-block;
  background:linear-gradient(90deg,#ff8fb5,#ff6b8a);
  color:#fff;
  padding:10px 20px;
  border-radius:999px;
  margin-top:20px;
  text-decoration:none;
  font-weight:600;
  box-shadow:0 6px 18px rgba(255,107,138,0.3);
  transition:transform 0.2s;
}
.btn:hover{transform:scale(1.05);}
</style>
</head>
<body>

<!-- Fondos -->
<div class="bg" id="bg1" style="background-image:url('fondo1.jpg')"></div>
<div class="bg" id="bg2" style="background-image:url('fondo2.jpg')"></div>
<div class="bg" id="bg3" style="background-image:url('fondo3.jpg')"></div>
<div class="overlay"></div>

<div class="confetti" id="confetti"></div>
<div class="hearts" id="hearts"></div>

<div class="stage">
  <!-- Escena 1 -->
  <div id="scene1">
    <div class="envelope" onclick="startScene2()"></div>
  </div>

  <!-- Escena 2 -->
  <div id="scene2" style="display:none;">
    <div class="card show">
      <h1>En el mundo de Zootopia...</h1>
      <p>dos corazones distintos se encontraron üíû  
y aprendieron que el amor no entiende de especies,  
solo de sentimientos verdaderos ü¶äüê∞</p>
      <div class="characters">
        <img src="nick.png" class="character" alt="Nick">
        <img src="judy.png" class="character" alt="Judy">
      </div>
      <a class="btn" href="#" onclick="startScene3()">Continuar ‚ûú</a>
    </div>
  </div>

  <!-- Escena 3 -->
  <div id="scene3" style="display:none;">
    <div class="card show">
      <h1>Gracias por ser mi Zootopia üåô</h1>
      <p>Eres mi hogar, mi aventura y mi raz√≥n de sonre√≠r.  
Contigo, cada d√≠a es una historia hermosa.  
Te amo con todo mi coraz√≥n üíñ</p>
      <a class="btn" href="#" onclick="replay()">Volver a empezar</a>
    </div>
  </div>
</div>

<!-- M√∫sica -->
<audio id="musica" src="musica.mp3" preload="auto"></audio>
<audio id="finalMusica" src="final.mp3" preload="auto"></audio>

<script>
const musica = document.getElementById("musica");
const finalMusica = document.getElementById("finalMusica");
const confettiContainer = document.getElementById("confetti");
const heartsContainer = document.getElementById("hearts");

let confettiInterval;

function startScene2(){
  // M√∫sica inicial (iPhone-safe)
  musica.currentTime = 0;
  musica.play().catch(()=>{
    document.body.addEventListener('touchstart',()=>musica.play(),{once:true});
  });

  // Cambiar fondo
  document.getElementById("bg1").classList.remove("show");
  document.getElementById("bg2").classList.add("show");
  document.getElementById("scene1").style.display="none";
  document.getElementById("scene2").style.display="block";

  lanzarConfetti();
  confettiInterval = setInterval(lanzarConfetti, 4000);
}

function startScene3(){
  musica.pause();
  finalMusica.currentTime = 0;
  finalMusica.play().catch(()=>{
    document.body.addEventListener('touchstart',()=>finalMusica.play(),{once:true});
  });

  document.getElementById("bg2").classList.remove("show");
  document.getElementById("bg3").classList.add("show");
  document.getElementById("scene2").style.display="none";
  document.getElementById("scene3").style.display="block";
  lanzarCorazones();
}

function replay(){
  finalMusica.pause();
  document.getElementById("bg3").classList.remove("show");
  document.getElementById("bg1").classList.add("show");
  document.getElementById("scene3").style.display="none";
  document.getElementById("scene1").style.display="block";
  clearInterval(confettiInterval);
}

function lanzarConfetti(){
  const emojis = ["üå∏","‚ú®","üíû","ü¶ñ","üß∏","üíó"];
  for(let i=0;i<25;i++){
    setTimeout(()=>{
      const e=document.createElement("div");
      e.classList.add("emoji");
      e.innerText=emojis[Math.floor(Math.random()*emojis.length)];
      let x;
      do{x=Math.random()*100;}while(x>40&&x<60);
      e.style.left=x+"vw";
      e.style.animationDuration=(3+Math.random()*3)+"s";
      e.style.fontSize=(18+Math.random()*20)+"px";
      confettiContainer.appendChild(e);
      setTimeout(()=>e.remove(),6000);
    },i*80);
  }
}

function lanzarCorazones(){
  for(let i=0;i<20;i++){
    setTimeout(()=>{
      const h=document.createElement("span");
      h.innerText="üíó";
      h.style.position="absolute";
      h.style.left=Math.random()*100+"vw";
      h.style.fontSize=(16+Math.random()*20)+"px";
      h.style.animation=`floatUp ${3+Math.random()*3}s linear forwards`;
      heartsContainer.appendChild(h);
      setTimeout(()=>h.remove(),6000);
    },i*100);
  }
}
</script>
</body>
</html>
